<script type="text/javascript">
    RED.nodes.registerType('EnOcean-IP',{
        category: 'bridge',
        color: "rgb(171, 209, 46)",
        defaults: {
            name: {value: "EnOceanGateway"},
            ip: {value:"127.0.0.1"},
            port: {value:"9090"},
            password: {value:"user"}
        },
        inputs:1,
        outputs:1,
        icon: "dolphin.png",
        align: "right",
        label: function() {
            return this.name||"EnOcean-IP";
        }
    });
</script>

<script type="text/x-red" data-template-name="EnOcean-IP">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="EnOceanGateway">
    </div>

    <div class="form-row">
        <label for="node-input-ip"><i class="fa fa-plug"></i> IP</label>
        <input type="text" id="node-input-ip" placeholder="127.0.0.1">
    </div>

    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-sort-numeric-asc"></i> Port</label>
        <input type="text" id="node-input-port" placeholder="9090">
    </div>

    <div class="form-row">
        <label for="node-input-password"><i class="fa fa-key"></i> Password</label>
        <input type="text" id="node-input-password" placeholder="user">
    </div>
</script>

<script type="text/x-red" data-help-name="EnOcean-IP">
    <p>A connection to Digital Concept&lsquo;s EnOcean Gateway will be accomplished. The node outputs events that occur on EnOcean radio. When edit screen is prompted, the node can be configured to connect on remote -or localhost either. Two APIs are available in general. This node will connect to the simpleapi that is bound on port 9090 by default and outputs a line-and-csv-separated output.
    </p>

    <p>For testing purposes a gateway has been made public. Please use <i>dcgw.enocean-gateway.eu</i> in the IP field in case you do not have any alternative. You will peek events from Stuttgart, Germany and be able to send actions as well. You need to follow a syntax in order to send commands.</p>


    <p>Several commands are available on input side of Gateway&lsquo;s API.</p>

    

    <p>
    <i>
    <br>send action to a device 
    <br><b>send;deviceId=ABCDEF12;functionName1=functionValue1;functionName2=functionValue2</b>
    <br>get a list of devices 
    <br><b>devices</b>
    <br>get a system info
    <br><b>sytemInfo</b>
    <br>get a system version 
    <br><b>version</b>

    </i>
    </p>

    The function names with their interface specification can be retrieved through HTTP requests in a syntax:<br>
    <br>All profiles <a href="http://dcgw.enocean-gateway.eu:8080/profiles">&#47;profiles</a>
    <br>Single profile<a href="http://dcgw.enocean-gateway.eu:8080/profiles/f6-02-01">&#47;profiles&#47;f6-02-01</a>
    <br>Ask the device <a href="http://dcgw.enocean-gateway.eu:8080/devices/01844BB0/profile">&#47;devices&#47;DEVICE-ID&#47;profile</a>
    
    <p>
    Please visit the landing page on port 8080 for more detailed information about the JSON API.
    <a href="http://dcgw.enocean-gateway.eu:8080">http:&#47;&#47;dcgw.enocean-gateway.eu:8080</a>
    </p>

</script>
